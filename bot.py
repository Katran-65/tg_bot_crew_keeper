import logging
import random
from telegram import Update
from telegram.ext import Application, CommandHandler, MessageHandler, filters, ContextTypes, CallbackContext
import datetime
from typing import Dict, Tuple

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
logging.basicConfig(
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s',
    level=logging.INFO
)

BOT_TOKEN = "8217389924:AAGx0JqHebI9y26bPPwSACaOByR9wza8LDk"

# –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π —Å–ª–æ–≤–∞—Ä—å –æ—Ç–≤–µ—Ç–æ–≤
RESPONSES = {
    "–ú–∞–Ω—á–µ—Å—Ç–µ—Ä": ["–ú–∞–Ω—á–µ—Å—Ç–µ—Ä —Å–∏–Ω–∏–π", "–ï—Å–ª–∏ —â–∞—Å –æ–ø—è—Ç—å –Ω–∞—á–Ω–µ—Ç—Å—è –ø—Ä–æ—Ç–∏–≤–æ—Å—Ç–æ—è–Ω–∏–µ –ú–Æ, –ß–µ–ª—Å–∏ –∏ –õ–∏–≤–µ—Ä–ø—É–ª—è, —è —É–π–¥—É —Å–ø–∞—Ç—å!",
                  "–ù–∞–¥–æ–µ–ª–∏"],
    "–º–∞–Ω—á–µ—Å—Ç–µ—Ä": ["–ú–∞–Ω—á–µ—Å—Ç–µ—Ä —Å–∏–Ω–∏–π", "–ï—Å–ª–∏ —â–∞—Å –æ–ø—è—Ç—å –Ω–∞—á–Ω–µ—Ç—Å—è –ø—Ä–æ—Ç–∏–≤–æ—Å—Ç–æ—è–Ω–∏–µ –ú–Æ, –ß–µ–ª—Å–∏ –∏ –õ–∏–≤–µ—Ä–ø—É–ª—è, —è —É–π–¥—É —Å–ø–∞—Ç—å!",
                  "–ù–∞–¥–æ–µ–ª–∏"],
    "–ß–µ–ª—Å–∏": ["–û–ø—è—Ç—å –æ —Å–≤–æ—ë–º —Ñ—É—Ç–±–æ–ª–µ –±–∞–∑–∞—Ä—è—Ç", "—Å–∫—É—É—É—É—à–Ω–æ–æ–æ–æ", "–æ–ø—è—è—è—è—è—Ç—å!"],
    "–î—É—à–Ω–∏—Ç—å": ["–û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–æ—Ä—Ç–æ—á–∫—É", "–ó–∞–Ω—É–¥–∞)", "–∫—É–±–æ–∫ –∑–∞–Ω—É–¥ —É–∂–µ —Ç–≤–æ–π, –∑–∞–±–µ–π"],
    "—á–µ–ª—Å–∏": ["–û–ø—è—Ç—å –æ —Å–≤–æ—ë–º —Ñ—É—Ç–±–æ–ª–µ –±–∞–∑–∞—Ä—è—Ç", "—Å–∫—É—É—É—É—à–Ω–æ–æ–æ–æ"],
    "–¥—É—à–Ω–∏—Ç—å": ["–û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–æ—Ä—Ç–æ—á–∫—É", "–ó–∞–Ω—É–¥–∞)", "–∫—É–±–æ–∫ –∑–∞–Ω—É–¥ —É–∂–µ —Ç–≤–æ–π, –∑–∞–±–µ–π"],
    "–¥—É—à–Ω–∏": ["–û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–æ—Ä—Ç–æ—á–∫—É", "–ó–∞–Ω—É–¥–∞)", "–∫—É–±–æ–∫ –∑–∞–Ω—É–¥ —É–∂–µ —Ç–≤–æ–π, –∑–∞–±–µ–π"],
    "–¥—É—à–Ω–æ": ["–û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–æ—Ä—Ç–æ—á–∫—É", "–ó–∞–Ω—É–¥–∞)", "–∫—É–±–æ–∫ –∑–∞–Ω—É–¥ —É–∂–µ —Ç–≤–æ–π, –∑–∞–±–µ–π"],
    "–¥—É—à–Ω–∏—Ç–µ": ["–û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–æ—Ä—Ç–æ—á–∫—É", "–ó–∞–Ω—É–¥–∞)", "–∫—É–±–æ–∫ –∑–∞–Ω—É–¥ —É–∂–µ —Ç–≤–æ–π, –∑–∞–±–µ–π"],
    "–§–µ–Ω–∏–∫—Å": ["–§–µ–Ω–∏–∫—Å–∫—Å–∫—Å–∫—Å", "–º—ã –∫–æ–º–∞–Ω–¥–æ. —Ñ—É—Ç–±–æ–ª–µ—Ç–æ –ø—Ä–æ–∏–≥—Ä–∞—Ç–æ –Ω–µ—É–¥–∞—á–æ. –ú—ã –∏–≥—Ä–∞–µ–º –∑–∞–±–∏–≤–∞–µ–º —É–º–∏—Ä–∞–µ–º. –º—ã —Ñ–µ–Ω–∏–∫—Å–æ. –ª—é–±–∏–º –∫–∞—Ç—é –ª–µ–Ω—É —Ç–∞–Ω—é –ø–∏—Ü—Ü—É"],
    "—Ñ–µ–Ω–∏–∫—Å": ["–§–µ–Ω–∏–∫—Å–∫—Å–∫—Å–∫—Å", "–º—ã –∫–æ–º–∞–Ω–¥–æ. —Ñ—É—Ç–±–æ–ª–µ—Ç–æ –ø—Ä–æ–∏–≥—Ä–∞—Ç–æ –Ω–µ—É–¥–∞—á–æ. –ú—ã –∏–≥—Ä–∞–µ–º –∑–∞–±–∏–≤–∞–µ–º —É–º–∏—Ä–∞–µ–º. –º—ã —Ñ–µ–Ω–∏–∫—Å–æ. –ª—é–±–∏–º –∫–∞—Ç—é –ª–µ–Ω—É —Ç–∞–Ω—é –ø–∏—Ü—Ü—É"],
    "–ø–æ—Ö–º–µ–ª—å–µ": ["–º–µ–Ω—å—à–µ –Ω–∞–¥–æ –±—ã–ª–æ –ø–∏—Ç—å", "–∞ –∫—Ç–æ –≤ —ç—Ç–æ–º –≤–∏–Ω–æ–≤–∞—Ç?", "–∫—Ä—è(", "—Å–æ–±–æ–ª–µ–∑–Ω—É—é"],
    "–ø–æ—Ö–º–µ–ª—å—è": ["–º–µ–Ω—å—à–µ –Ω–∞–¥–æ –±—ã–ª–æ –ø–∏—Ç—å", "–∞ –∫—Ç–æ –≤ —ç—Ç–æ–º –≤–∏–Ω–æ–≤–∞—Ç?", "–∫—Ä—è(", "—Å–æ–±–æ–ª–µ–∑–Ω—É—é"],
    "–∞–Ω–µ–∫–¥–æ—Ç": ["–ê–Ω–µ–∫–¥–æ—Ç? –ü—Ä–æ –Ω—é–∞–Ω—Å?", "–í–ù–ò–ú–ê–ù–ò–ï –ê–ù–ï–ö–î–û–¢", "–û–¥–Ω–∞–∂–¥—ã –≥–∏–¥—Ä–æ–ª–æ–≥ –∏ –≥–µ–æ–ª–æ–≥ –≤—Å—Ç—Ä–µ—Ç–∏–ª–∏—Å—å –≤ –ø–∞–±–µ..."],
    "–∞–Ω–µ–∫–¥–æ—Ç—ã": ["–ê–Ω–µ–∫–¥–æ—Ç? –ü—Ä–æ –Ω—é–∞–Ω—Å?", "–í–ù–ò–ú–ê–ù–ò–ï –ê–ù–ï–ö–î–û–¢", "–û–¥–Ω–∞–∂–¥—ã –≥–∏–¥—Ä–æ–ª–æ–≥ –∏ –≥–µ–æ–ª–æ–≥ –≤—Å—Ç—Ä–µ—Ç–∏–ª–∏—Å—å –≤ –ø–∞–±–µ..."],
    "–ü–æ—Ö–º–µ–ª—å–µ": ["–º–µ–Ω—å—à–µ –Ω–∞–¥–æ –±—ã–ª–æ –ø–∏—Ç—å", "–∞ –∫—Ç–æ –≤ —ç—Ç–æ–º –≤–∏–Ω–æ–≤–∞—Ç?", "–∫—Ä—è(", "—Å–æ–±–æ–ª–µ–∑–Ω—É—é"],
    "–ü–æ—Ö–º–µ–ª—å—è": ["–º–µ–Ω—å—à–µ –Ω–∞–¥–æ –±—ã–ª–æ –ø–∏—Ç—å", "–∞ –∫—Ç–æ –≤ —ç—Ç–æ–º –≤–∏–Ω–æ–≤–∞—Ç?", "–∫—Ä—è(", "—Å–æ–±–æ–ª–µ–∑–Ω—É—é"],
    "–ê–Ω–µ–∫–¥–æ—Ç": ["–ê–Ω–µ–∫–¥–æ—Ç? –ü—Ä–æ –Ω—é–∞–Ω—Å?", "–í–ù–ò–ú–ê–ù–ò–ï –ê–ù–ï–ö–î–û–¢", "–û–¥–Ω–∞–∂–¥—ã –≥–∏–¥—Ä–æ–ª–æ–≥ –∏ –≥–µ–æ–ª–æ–≥ –≤—Å—Ç—Ä–µ—Ç–∏–ª–∏—Å—å –≤ –ø–∞–±–µ..."],
    "–ê–Ω–µ–∫–¥–æ—Ç—ã": ["–ê–Ω–µ–∫–¥–æ—Ç? –ü—Ä–æ –Ω—é–∞–Ω—Å?", "–í–ù–ò–ú–ê–ù–ò–ï –ê–ù–ï–ö–î–û–¢", "–û–¥–Ω–∞–∂–¥—ã –≥–∏–¥—Ä–æ–ª–æ–≥ –∏ –≥–µ–æ–ª–æ–≥ –≤—Å—Ç—Ä–µ—Ç–∏–ª–∏—Å—å –≤ –ø–∞–±–µ..."],
    "–ø–∏–≤–æ": ["–ü–µ–π –ø–∏–≤–æ, –µ—à—å –º—è—Å–æ", "–©–∞—Å –≤–æ–æ–±—â–µ –Ω–µ —É–¥–∏–≤–∏—Ç–µ–ª—å–Ω–æ —á—Ç–æ –≤ —á–∞—Ç–µ –ë—É—Ö–ª–æ—Ö–æ–¥ —Ä–∞–∑–≥–æ–≤–æ—Ä –æ –ø–∏–≤–µ", "–ö–æ–≥–¥–∞ –±—É—Ö–∞—Ç—å?"],
    "–ü–∏–≤–æ": ["–ü–µ–π –ø–∏–≤–æ, –µ—à—å –º—è—Å–æ", "–©–∞—Å –≤–æ–æ–±—â–µ –Ω–µ —É–¥–∏–≤–∏—Ç–µ–ª—å–Ω–æ —á—Ç–æ –≤ —á–∞—Ç–µ –ë—É—Ö–ª–æ—Ö–æ–¥ —Ä–∞–∑–≥–æ–≤–æ—Ä –æ –ø–∏–≤–µ", "–ö–æ–≥–¥–∞ –±—É—Ö–∞—Ç—å?"],
    "–ø–∏–≤–∞": ["–ü–µ–π –ø–∏–≤–æ, –µ—à—å –º—è—Å–æ", "–©–∞—Å –≤–æ–æ–±—â–µ –Ω–µ —É–¥–∏–≤–∏—Ç–µ–ª—å–Ω–æ —á—Ç–æ –≤ —á–∞—Ç–µ –ë—É—Ö–ª–æ—Ö–æ–¥ —Ä–∞–∑–≥–æ–≤–æ—Ä –æ –ø–∏–≤–µ", "–ö–æ–≥–¥–∞ –±—É—Ö–∞—Ç—å?"],
    "–ü–∏–≤–∞": ["–ü–µ–π –ø–∏–≤–æ, –µ—à—å –º—è—Å–æ", "–©–∞—Å –≤–æ–æ–±—â–µ –Ω–µ —É–¥–∏–≤–∏—Ç–µ–ª—å–Ω–æ —á—Ç–æ –≤ —á–∞—Ç–µ –ë—É—Ö–ª–æ—Ö–æ–¥ —Ä–∞–∑–≥–æ–≤–æ—Ä –æ –ø–∏–≤–µ", "–ö–æ–≥–¥–∞ –±—É—Ö–∞—Ç—å?"],
    "—Ç—Ä–æ–ª–ª": ["–í—Å–µ –≤—ã —Ç—É—Ç —Ç—Ä–æ–ª–ª–∏", "–≤—ã –∫–æ–≥–¥–∞-–Ω–∏–±—É–¥—å —Å–ª—ã—à–∞–ª–∏ –æ –º—É–º–∏—Ç—Ä–æ–ª–ª–∏–Ω–≥–µ?", "—à—É—Ç–µ–µ—á–∫–∏?"],
    "–¢—Ä–æ–ª–ª": ["–í—Å–µ –≤—ã —Ç—É—Ç —Ç—Ä–æ–ª–ª–∏", "–≤—ã –∫–æ–≥–¥–∞-–Ω–∏–±—É–¥—å —Å–ª—ã—à–∞–ª–∏ –æ –º—É–º–∏—Ç—Ä–æ–ª–ª–∏–Ω–≥–µ?", "—à—É—Ç–µ–µ—á–∫–∏?"],
    "–õ–∏–∑–∞": ["–õ–∏–∑–∞ - –º–æ–π –ª—é–±–∏–º—ã –ø–µ—Ä—Å–æ–Ω–∞–∂ –≤ —ç—Ç–æ–º —á–∞—Ç–µ", "–µ–ª–∏–∑–∞–≤–µ–µ–µ—Ç–∞ –∂–∏–ª–∞ –≤ –∫—Ä–∞—Å–Ω–æ–¥–∞—Ä–µ–µ–µ", "–¥–∂–∏–Ω?"],
    "–ª–∏–∑–∞": ["–õ–∏–∑–∞ - –º–æ–π –ª—é–±–∏–º—ã –ø–µ—Ä—Å–æ–Ω–∞–∂ –≤ —ç—Ç–æ–º —á–∞—Ç–µ", "–µ–ª–∏–∑–∞–≤–µ–µ–µ—Ç–∞ –∂–∏–ª–∞ –≤ –∫—Ä–∞—Å–Ω–æ–¥–∞—Ä–µ–µ–µ", "–¥–∂–∏–Ω?"],
    "–õ–∏–∑—É": ["–õ–∏–∑–∞ - –º–æ–π –ª—é–±–∏–º—ã –ø–µ—Ä—Å–æ–Ω–∞–∂ –≤ —ç—Ç–æ–º —á–∞—Ç–µ", "–µ–ª–∏–∑–∞–≤–µ–µ–µ—Ç–∞ –∂–∏–ª–∞ –≤ –∫—Ä–∞—Å–Ω–æ–¥–∞—Ä–µ–µ–µ", "–¥–∂–∏–Ω?"],
    "–ª–∏–∑—É": ["–õ–∏–∑–∞ - –º–æ–π –ª—é–±–∏–º—ã –ø–µ—Ä—Å–æ–Ω–∞–∂ –≤ —ç—Ç–æ–º —á–∞—Ç–µ", "–µ–ª–∏–∑–∞–≤–µ–µ–µ—Ç–∞ –∂–∏–ª–∞ –≤ –∫—Ä–∞—Å–Ω–æ–¥–∞—Ä–µ–µ–µ", "–¥–∂–∏–Ω?"],
    "–õ–∏–∑–µ": ["–õ–∏–∑–∞ - –º–æ–π –ª—é–±–∏–º—ã –ø–µ—Ä—Å–æ–Ω–∞–∂ –≤ —ç—Ç–æ–º —á–∞—Ç–µ", "–µ–ª–∏–∑–∞–≤–µ–µ–µ—Ç–∞ –∂–∏–ª–∞ –≤ –∫—Ä–∞—Å–Ω–æ–¥–∞—Ä–µ–µ–µ", "–¥–∂–∏–Ω?"],
    "–ª–∏–∑–µ": ["–õ–∏–∑–∞ - –º–æ–π –ª—é–±–∏–º—ã –ø–µ—Ä—Å–æ–Ω–∞–∂ –≤ —ç—Ç–æ–º —á–∞—Ç–µ", "–µ–ª–∏–∑–∞–≤–µ–µ–µ—Ç–∞ –∂–∏–ª–∞ –≤ –∫—Ä–∞—Å–Ω–æ–¥–∞—Ä–µ–µ–µ", "–¥–∂–∏–Ω?"],
    "–õ–∏–∑—ã": ["–õ–∏–∑–∞ - –º–æ–π –ª—é–±–∏–º—ã –ø–µ—Ä—Å–æ–Ω–∞–∂ –≤ —ç—Ç–æ–º —á–∞—Ç–µ", "–µ–ª–∏–∑–∞–≤–µ–µ–µ—Ç–∞ –∂–∏–ª–∞ –≤ –∫—Ä–∞—Å–Ω–æ–¥–∞—Ä–µ–µ–µ", "–¥–∂–∏–Ω?"],
    "–ª–∏–∑—ã": ["–õ–∏–∑–∞ - –º–æ–π –ª—é–±–∏–º—ã –ø–µ—Ä—Å–æ–Ω–∞–∂ –≤ —ç—Ç–æ–º —á–∞—Ç–µ", "–µ–ª–∏–∑–∞–≤–µ–µ–µ—Ç–∞ –∂–∏–ª–∞ –≤ –∫—Ä–∞—Å–Ω–æ–¥–∞—Ä–µ–µ–µ", "–¥–∂–∏–Ω?"],
    "Katran": ["–û–±—Ä–∞—â–∞—Ç—å—Å—è –∫ –ï–∫–∞—Ç–µ—Ä–∏–Ω–µ —á–µ—Ä–µ–∑ –ª–∏—á–Ω–æ–≥–æ —Å–µ–∫—Ä–µ—Ç–∞—Ä—è", "–µ–∫–∞—Ç–µ—Ä–∏–Ω–∞ –≤–Ω–µ –∑–æ–Ω—ã –¥–µ–π—Å—Ç–≤–∏—è —Å–µ—Ç–∏, –æ—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —á–∞—Ç–µ —Å–±–µ—Ä–±–∞–Ω–∫–∞", "–∫–∞—Ç—Ä–∞–Ω - —ç—Ç–æ –∞–∫—É–ª–∞ –∫—Å—Ç–∞—Ç–∏"],
    "enel": ["–ß–µ –≤–∞–º –Ω–∞–¥–æ –æ—Ç –õ–µ–Ω—ã? –∞—Ü—Ç–∞–Ω—å—Ç–µ –æ—Ç —á–µ–ª–æ–≤–µ–∫–∞ –≤ —Ç–æ–∫–æ–µ –≤—Ä–µ–º—è", "—É –∞–ø–ø–∞—Ä–∞—Ç–∞ –ï–ª–µ–Ω–∞ –ê–ª–µ–∫—Å–µ–µ–≤–Ω–∞, –≥–æ–≤–æ—Ä–∏—Ç–µ", "–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø—Ä–∞–≤–æ—á–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ—Ç Enel –∑–∞–π–¥–∏—Ç–µ –≤ –±–∞—Ä"],
    "TatyanaShumilova": ["–¢–∞—Ç—å—è–Ω–∞ –±—É–¥–µ—Ç –Ω–∞ —Å–≤—è–∑–∏ —á–µ—Ä–µ–∑ –ø–æ–ª—á–∞—Å–∞. –ê –µ—Å–ª–∏ –Ω–µ—Ç, —Ç–æ –ø–µ—Ä–µ—á–∏—Ç–∞–π—Ç–µ —ç—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ.", "–ò—â—É –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–≤, –ø—Ä–∏—Å—ã–ª–∞–π—Ç–µ —Ä–µ–∑—é–º–µ", "–æ–Ω–∞ –Ω–∞ –¥–∞—á–µ..."],
    "Ekaterina_K_": ["–≤ —Ä–∞–º–∫–µ –∑–∞—â–∏—â–∞–µ—Ç —á–µ—Å—Ç—å —Ñ–µ–Ω–∏–∫—Å–æ, –ø–µ—Ä–µ–∑–≤–æ–Ω–∏—Ç–µ –ø–æ–∑–∂–µ–µ–µ", "–ß—É—Ç—å —á—Ç–æ —Å—Ä–∞–∑—É –ö–∞—Ç—è, —á—Ç–æ –Ω–µ —Å–ø—Ä–æ—Å–∏—à—å - –ö–∞—Ç—è", "–ö–∞—Ç—è –º—á–∏—Ç, —á—Ç–æ–±—ã –æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ –≤–∞—à –∑–∞–ø—Ä–æ—Å"],
    "–î–∂–µ–∫": ["–Ø —Ç—É—Ç!", "–í—ã –ø—Ä–æ –º–µ–Ω—è –∏–ª–∏ –ø—Ä–æ –≤–∏—Å–∫–∏?", "–ß–µ –Ω–∞–¥–æ?"],
    "–¥–∂–µ–∫": ["–Ø —Ç—É—Ç!", "–í—ã –ø—Ä–æ –º–µ–Ω—è –∏–ª–∏ –ø—Ä–æ –≤–∏—Å–∫–∏?", "–ß–µ –Ω–∞–¥–æ?"]
}

# –ë–∞–∑–∞ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤
QUESTIONS = [
    "–ö–∞–∫–∞—è –∫–Ω–∏–≥–∞ –∏–∑–º–µ–Ω–∏–ª–∞ —Ç–≤–æ—é –∂–∏–∑–Ω—å –∏ –ø–æ—á–µ–º—É?",
    "–ï—Å–ª–∏ –±—ã —É —Ç–µ–±—è –±—ã–ª —Å—É–ø–µ—Ä—Å–∏–ª–∞ –Ω–∞ –æ–¥–∏–Ω –¥–µ–Ω—å, —á—Ç–æ –±—ã —Ç—ã –≤—ã–±—Ä–∞–ª –∏ –∫–∞–∫ –±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª?",
    "–ö–∞–∫–æ–π —Å–∞–º—ã–π –±–µ–∑—É–º–Ω—ã–π –ø–æ—Å—Ç—É–ø–æ–∫ —Ç—ã —Å–æ–≤–µ—Ä—à–∏–ª –≤ –∂–∏–∑–Ω–∏?",
    "–ö–∞–∫–æ–π —Ñ–∏–ª—å–º —Ç—ã –º–æ–∂–µ—à—å –ø–µ—Ä–µ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ?",
    "–ï—Å–ª–∏ –±—ã —Ç—ã –º–æ–≥ –ø–æ—É–∂–∏–Ω–∞—Ç—å —Å –ª—é–±—ã–º —á–µ–ª–æ–≤–µ–∫–æ–º –∏–∑ –∏—Å—Ç–æ—Ä–∏–∏, –∫–æ–≥–æ –±—ã –≤—ã–±—Ä–∞–ª –∏ –æ —á–µ–º –±—ã —Å–ø—Ä–æ—Å–∏–ª?",
    "–ö–∞–∫–æ–µ —Ç–≤–æ–µ —Å–∞–º–æ–µ —Å—Ç—Ä–∞–Ω–Ω–æ–µ —É–º–µ–Ω–∏–µ –∏–ª–∏ —Ç–∞–ª–∞–Ω—Ç?",
    "–ö–∞–∫–æ–π —Å–∞–º—ã–π –Ω–µ–ª–æ–≤–∫–∏–π –º–æ–º–µ–Ω—Ç —Å–ª—É—á–∏–ª—Å—è —Å —Ç–æ–±–æ–π –Ω–∞ —Å–≤–∏–¥–∞–Ω–∏–∏?",
    "–ï—Å–ª–∏ –±—ã —Ç—ã —É–∑–Ω–∞–ª, —á—Ç–æ –∑–∞–≤—Ç—Ä–∞ –∫–æ–Ω–µ—Ü —Å–≤–µ—Ç–∞, –∫–∞–∫ –±—ã –ø—Ä–æ–≤–µ–ª —Å–µ–≥–æ–¥–Ω—è—à–Ω–∏–π –¥–µ–Ω—å?",
    "–ö–∞–∫–∞—è –ø–µ—Å–Ω—è –∑–∞—Å—Ç–∞–≤–ª—è–µ—Ç —Ç–µ–±—è –ø–ª–∞–∫–∞—Ç—å –∏–ª–∏ —Å–º–µ—è—Ç—å—Å—è –±–µ–∑ –ø—Ä–∏—á–∏–Ω—ã?",
    "–ö–∞–∫–æ–π —Å–∞–º—ã–π –ª—É—á—à–∏–π —Å–æ–≤–µ—Ç —Ç–µ–±–µ –¥–∞–≤–∞–ª–∏ –≤ –∂–∏–∑–Ω–∏?",
    "–ï—Å–ª–∏ –±—ã —Ç—ã –º–æ–≥ –∂–∏—Ç—å –≤ –ª—é–±–æ–π –≤—ã–º—ã—à–ª–µ–Ω–Ω–æ–π –≤—Å–µ–ª–µ–Ω–Ω–æ–π, –∫–∞–∫—É—é –±—ã –≤—ã–±—Ä–∞–ª?",
    "–ö–∞–∫–æ–µ —Ç–≤–æ–µ —Å–∞–º–æ–µ –¥–µ—Ç—Å–∫–æ–µ –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏–µ?",
    "–ï—Å–ª–∏ –±—ã —Ç—ã –º–æ–≥ –∏–∑–º–µ–Ω–∏—Ç—å –æ–¥–Ω—É –≤–µ—â—å –≤ —Å–≤–æ–µ–º –ø—Ä–æ—à–ª–æ–º, —á—Ç–æ –±—ã —ç—Ç–æ –±—ã–ª–æ?",
    "–ö–∞–∫–æ–π —Å–∞–º—ã–π –Ω–µ–æ–±—ã—á–Ω—ã–π —Å–æ–Ω —Ç–µ–±–µ —Å–Ω–∏–ª—Å—è?",
    "–ï—Å–ª–∏ –±—ã —Ç—ã —Å—Ç–∞–ª –∑–Ω–∞–º–µ–Ω–∏—Ç—ã–º, —á—Ç–æ –±—ã —Ç—ã —Ö–æ—Ç–µ–ª, —á—Ç–æ–±—ã –æ —Ç–µ–±–µ –ø–æ–º–Ω–∏–ª–∏?",
    "–ö–∞–∫–æ–µ –±–ª—é–¥–æ —Ç—ã —Å—á–∏—Ç–∞–µ—à—å —Å–≤–æ–∏–º –∫—É–ª–∏–Ω–∞—Ä–Ω—ã–º —à–µ–¥–µ–≤—Ä–æ–º?",
    "–ï—Å–ª–∏ –±—ã –∂–∏–≤–æ—Ç–Ω—ã–µ –º–æ–≥–ª–∏ –≥–æ–≤–æ—Ä–∏—Ç—å, —Å –∫–∞–∫–∏–º –±—ã —Ç—ã —Ö–æ—Ç–µ–ª –ø–æ–±–æ–ª—Ç–∞—Ç—å?",
    "–ö–∞–∫–æ–π —Å–∞–º—ã–π –∫—Ä–∞—Å–∏–≤—ã–π —É–≥–æ–ª–æ–∫ –ø—Ä–∏—Ä–æ–¥—ã, –≥–¥–µ —Ç—ã –±—ã–≤–∞–ª?",
    "–ï—Å–ª–∏ –±—ã —Ç—ã –º–æ–≥ –º–≥–Ω–æ–≤–µ–Ω–Ω–æ –≤—ã—É—á–∏—Ç—å –ª—é–±–æ–π —è–∑—ã–∫, –∫–∞–∫–æ–π –±—ã –≤—ã–±—Ä–∞–ª?",
    "–ö–∞–∫–∞—è —à—É—Ç–∫–∞ –∏–ª–∏ –∞–Ω–µ–∫–¥–æ—Ç –≤—Å–µ–≥–¥–∞ –∑–∞—Å—Ç–∞–≤–ª—è–µ—Ç —Ç–µ–±—è —Å–º–µ—è—Ç—å—Å—è?",
    "–ï—Å–ª–∏ –±—ã —Ç—ã –º–æ–≥ –≤–µ—Ä–Ω—É—Ç—å—Å—è –≤ –ª—é–±–æ–π –≤–æ–∑—Ä–∞—Å—Ç, –∫–∞–∫–æ–π –±—ã –≤—ã–±—Ä–∞–ª –∏ –ø–æ—á–µ–º—É?",
    "–ö–∞–∫–æ–π —Å–∞–º—ã–π —Ü–µ–Ω–Ω—ã–π –∂–∏–∑–Ω–µ–Ω–Ω—ã–π —É—Ä–æ–∫ —Ç—ã —É—Å–≤–æ–∏–ª?",
    "–ï—Å–ª–∏ –±—ã —Ç—ã –º–æ–≥ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –ø—Ä–∞–∑–¥–Ω–∏–∫, –∫–∞–∫–∏–º –±—ã –æ–Ω –±—ã–ª?",
    "–ö–∞–∫–∞—è –∫–æ–º–ø—å—é—Ç–µ—Ä–Ω–∞—è –∏–≥—Ä–∞ –∑–∞—Ç—è–Ω—É–ª–∞ —Ç–µ–±—è –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ?",
    "–ï—Å–ª–∏ –±—ã —Ç—ã –º–æ–≥ —Ä–µ—à–∏—Ç—å –æ–¥–Ω—É –º–∏—Ä–æ–≤—É—é –ø—Ä–æ–±–ª–µ–º—É, –∫–∞–∫—É—é –±—ã –≤—ã–±—Ä–∞–ª?",
    "–ö–∞–∫–æ–π —Å–∞–º—ã–π —Å—Ç—Ä–∞–Ω–Ω—ã–π –ø—Ä–µ–¥–º–µ—Ç –≤ —Ç–≤–æ–µ–π –∫–æ–ª–ª–µ–∫—Ü–∏–∏?",
    "–ï—Å–ª–∏ –±—ã —Ç—ã –º–æ–≥ –±—ã—Ç—å —ç–∫—Å–ø–µ—Ä—Ç–æ–º –≤ –ª—é–±–æ–π –æ–±–ª–∞—Å—Ç–∏, –∫–∞–∫–æ–π –±—ã –≤—ã–±—Ä–∞–ª?",
    "–ö–∞–∫–æ–µ —Ç–≤–æ–µ —Å–∞–º–æ–µ –±–æ–ª—å—à–æ–µ –∏—Ä—Ä–∞—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Å—Ç—Ä–∞–¥–∞–Ω–∏–µ?",
    "–ï—Å–ª–∏ –±—ã —Ç—ã –º–æ–≥ –ø–æ–ª—É—á–∏—Ç—å –æ—Ç–≤–µ—Ç –Ω–∞ –ª—é–±–æ–π –≤–æ–ø—Ä–æ—Å, —á—Ç–æ –±—ã —Å–ø—Ä–æ—Å–∏–ª?",
    "–ö–∞–∫–æ–π —Å–∞–º—ã–π –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–π –∫–æ–º–ø–ª–∏–º–µ–Ω—Ç —Ç—ã –ø–æ–ª—É—á–∞–ª?",
    "–ï—Å–ª–∏ –±—ã —Ç—ã –º–æ–≥ –ø–æ–º–µ–Ω—è—Ç—å—Å—è –º–µ—Å—Ç–∞–º–∏ —Å –∫–µ–º-—Ç–æ –Ω–∞ –Ω–µ–¥–µ–ª—é, —Å –∫–µ–º –±—ã?",
    "–ö–∞–∫–∞—è —Å–∞–º–∞—è –±–µ–∑—É–º–Ω–∞—è –≤–µ—â—å –≤ —Ç–≤–æ–µ–º —Å–ø–∏—Å–∫–µ –∂–µ–ª–∞–Ω–∏–π?",
    "–ï—Å–ª–∏ –±—ã —Ç—ã –º–æ–≥ —Å–æ–∑–¥–∞—Ç—å –¥—É—Ö–∏ —Å –ª—é–±—ã–º –∑–∞–ø–∞—Ö–æ–º, –∫–∞–∫–∏–º –±—ã –æ–Ω –±—ã–ª?",
    "–ö–∞–∫–æ–π —Å–∞–º—ã–π —Å–º–µ—à–Ω–æ–π —Å–ª—É—á–∞–π –∏–∑ —Ç–≤–æ–µ–π —à–∫–æ–ª—å–Ω–æ–π –∂–∏–∑–Ω–∏?",
    "–ï—Å–ª–∏ –±—ã —Ç—ã –º–æ–≥ –¥–æ–±–∞–≤–∏—Ç—å –ª—é–±—É—é —ç–º–æ—Ü–∏—é –≤ –ø–∞–ª–∏—Ç—Ä—É —á–µ–ª–æ–≤–µ—á–µ—Å–∫–∏—Ö —á—É–≤—Å—Ç–≤, –∫–∞–∫—É—é –±—ã —Å–æ–∑–¥–∞–ª?",
    "–ö–∞–∫–æ–µ —Ç–≤–æ–µ —Å–∞–º–æ–µ —Å—Ç—Ä–∞–Ω–Ω–æ–µ –ø–∏—â–µ–≤–æ–µ —Å–æ—á–µ—Ç–∞–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ —Ç—ã –æ–±–æ–∂–∞–µ—à—å?",
    "–ï—Å–ª–∏ –±—ã —Ç—ã –º–æ–≥ —Å—Ç–∞—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–º –ª—é–±–æ–≥–æ —Ñ–∏–ª—å–º–∞, –∫–µ–º –±—ã —Å—Ç–∞–ª?",
    "–ö–∞–∫–æ–π —Å–∞–º—ã–π –Ω–µ–ª–µ–ø—ã–π —Å–ø–æ—Ä —É —Ç–µ–±—è –±—ã–ª –≤ –∂–∏–∑–Ω–∏?",
    "–ï—Å–ª–∏ –±—ã —Ç—ã –º–æ–≥ –∑–Ω–∞—Ç—å –∞–±—Å–æ–ª—é—Ç–Ω—É—é –∏—Å—Ç–∏–Ω—É –æ–± –æ–¥–Ω–æ–π –≤–µ—â–∏, —á—Ç–æ –±—ã —ç—Ç–æ –±—ã–ª–æ?",
    "–ö–∞–∫–∞—è —Å–∞–º–∞—è —Å—Ç—Ä–∞–Ω–Ω–∞—è –≤–µ—â—å, –∫–æ—Ç–æ—Ä–∞—è —Ç–µ–±—è –≤–ø–µ—á–∞—Ç–ª–∏–ª–∞?",
    "–ï—Å–ª–∏ –±—ã —Ç—ã –º–æ–≥ –∏–º–µ—Ç—å –ª—é–±–æ–µ –∂–∏–≤–æ—Ç–Ω–æ–µ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø–∏—Ç–æ–º—Ü–∞, –∫–∞–∫–æ–µ –±—ã –≤—ã–±—Ä–∞–ª?",
    "–ö–∞–∫–æ–π —Å–∞–º—ã–π –∑–∞–ø–æ–º–∏–Ω–∞—é—â–∏–π—Å—è –ø–æ–¥–∞—Ä–æ–∫ —Ç—ã –ø–æ–ª—É—á–∞–ª?",
    "–ï—Å–ª–∏ –±—ã —Ç—ã –º–æ–≥ –∏–∑–æ–±—Ä–µ—Ç–∏ —á—Ç–æ-—Ç–æ –ø–æ–ª–µ–∑–Ω–æ–µ –¥–ª—è —á–µ–ª–æ–≤–µ—á–µ—Å—Ç–≤–∞, —á—Ç–æ –±—ã —ç—Ç–æ –±—ã–ª–æ?",
    "–ö–∞–∫–∞—è —Å–∞–º–∞—è —Å–º–µ—à–Ω–∞—è –æ–ø–µ—á–∞—Ç–∫–∞ –∏–ª–∏ –∞–≤—Ç–æ–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É —Ç–µ–±—è –±—ã–ª–∞?",
    "–ï—Å–ª–∏ –±—ã —Ç—ã –º–æ–≥ –∂–∏—Ç—å –≤ –ª—é–±–æ–º –¥–µ—Å—è—Ç–∏–ª–µ—Ç–∏–∏ 20 –≤–µ–∫–∞, –∫–∞–∫–æ–µ –±—ã –≤—ã–±—Ä–∞–ª?"
]

# –ë–∞–∑–∞ –∫–æ–º–ø–ª–∏–º–µ–Ω—Ç–æ–≤
COMPLIMENTS = [
    "–¢—ã —Å–µ–≥–æ–¥–Ω—è –ø—Ä–æ—Å—Ç–æ —Å–∏—è–µ—à—å! ‚ú®",
    "–£ —Ç–µ–±—è –æ—Ç–ª–∏—á–Ω–æ–µ —á—É–≤—Å—Ç–≤–æ —é–º–æ—Ä–∞! üòÑ",
    "–° —Ç–æ–±–æ–π –≤—Å–µ–≥–¥–∞ —Ç–∞–∫ –ø—Ä–∏—è—Ç–Ω–æ –æ–±—â–∞—Ç—å—Å—è! üí´",
    "–¢—ã –Ω–µ–≤–µ—Ä–æ—è—Ç–Ω–æ —É–º—ë–Ω! üß†",
    "–¢–≤–æ—è —ç–Ω–µ—Ä–≥–∏—è –∑–∞—Ä–∞–∑–∏—Ç–µ–ª—å–Ω–∞! ‚ö°",
    "–£ —Ç–µ–±—è –ø—Ä–µ–∫—Ä–∞—Å–Ω—ã–π –≤–∫—É—Å! üëå",
    "–¢—ã –≤–¥–æ—Ö–Ω–æ–≤–ª—è–µ—à—å –æ–∫—Ä—É–∂–∞—é—â–∏—Ö! üåü",
    "–° —Ç–æ–±–æ–π –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ —Å–∫—É—á–Ω–æ! üéâ",
    "–¢—ã –º–∞—Å—Ç–µ—Ä—Å–∫–∏ –ø–æ–¥–±–∏—Ä–∞–µ—à—å —Å–ª–æ–≤–∞! üí¨",
    "–£ —Ç–µ–±—è –ø–æ—Ç—Ä—è—Å–∞—é—â–∞—è —Ö–∞—Ä–∏–∑–º–∞! üî•",
    "–¢—ã –≤—Å–µ–≥–¥–∞ –Ω–∞—Ö–æ–¥–∏—à—å –Ω—É–∂–Ω—ã–µ —Å–ª–æ–≤–∞! üìù",
    "–° —Ç–æ–±–æ–π –ø—Ä–∏—è—Ç–Ω–æ –∏–º–µ—Ç—å –¥–µ–ª–æ! ü§ù",
    "–¢—ã –∏–∑–ª—É—á–∞–µ—à—å –ø–æ–∑–∏—Ç–∏–≤! ‚òÄÔ∏è",
    "–£ —Ç–µ–±—è —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –≤–∑–≥–ª—è–¥ –Ω–∞ –≤–µ—â–∏! üëÅÔ∏è",
    "–¢—ã –¥–µ–ª–∞–µ—à—å –º–∏—Ä –ª—É—á—à–µ! üåç",
    "–° —Ç–æ–±–æ–π –º–æ–∂–Ω–æ –≥–æ–≤–æ—Ä–∏—Ç—å –Ω–∞ –ª—é–±—ã–µ —Ç–µ–º—ã! üí≠",
    "–¢—ã –≤—Å–µ–≥–¥–∞ –ø–æ–¥–Ω–∏–º–∞–µ—à—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ! üòä",
    "–£ —Ç–µ–±—è –∑–æ–ª–æ—Ç—ã–µ —Ä—É–∫–∏! üëê",
    "–¢—ã –ø—Ä–µ–∫—Ä–∞—Å–Ω—ã–π —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫! üó£Ô∏è",
    "–° —Ç–æ–±–æ–π —Ö–æ—á–µ—Ç—Å—è –¥–µ–ª–∏—Ç—å—Å—è –∏–¥–µ—è–º–∏! üí°"
]

# –ë–∞–∑–∞ –æ—Ç–≤–µ—Ç–æ–≤ "–î–∞"
YES_RESPONSES = [
    "–ê–±—Å–æ–ª—é—Ç–Ω–æ –¥–∞! ‚úÖ",
    "–ë–µ–∑—É—Å–ª–æ–≤–Ω–æ! üëç",
    "–°—Ç–æ –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤! üíØ",
    "–ù–µ —Å–æ–º–Ω–µ–≤–∞–π—Å—è! üòâ",
    "–ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ! üåü",
    "–†–∞–∑—É–º–µ–µ—Ç—Å—è! ü§ì",
    "–ë–µ–∑ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤! üöÄ",
    "–û–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ –¥–∞! ‚úÖ",
    "–ö–æ–Ω–µ—á–Ω–æ! üòä",
    "–°–∞–º–æ —Å–æ–±–æ–π! ‚ö°",
    "–ë–µ—Å—Å–ø–æ—Ä–Ω–æ! üéØ",
    "–î–∞, –∏ —ç—Ç–æ –Ω–µ –æ–±—Å—É–∂–¥–∞–µ—Ç—Å—è! üí™",
    "–ï—â—ë –±—ã! üî•",
    "–ë–µ–∑ —Å–æ–º–Ω–µ–Ω–∏–π! üòé",
    "–î–∞, –∏ —Ç–æ—á–∫–∞! üéâ",
    "–ù–µ—Å–æ–º–Ω–µ–Ω–Ω–æ! ‚ú®",
    "–î–∞, –∫–æ–Ω–µ—á–Ω–æ! üåà",
    "–ê –∫–∞–∫ –∏–Ω–∞—á–µ! üí•"
]

# –°–ª–æ–≤–∞—Ä—å –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å—á–µ—Ç—á–∏–∫–æ–≤ —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ —á–∞—Ç–∞–º
message_counters: Dict[int, int] = {}
# –°–ª–æ–≤–∞—Ä—å –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–æ—Ä–æ–≥–æ–≤ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∫–æ–º–ø–ª–∏–º–µ–Ω—Ç–æ–≤ –ø–æ —á–∞—Ç–∞–º
compliment_thresholds: Dict[int, int] = {}
# –°–ª–æ–≤–∞—Ä—å –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–π –∫–æ–º–∞–Ω–¥—ã /leave
leave_states: Dict[int, Dict] = {}


def should_send_compliment(chat_id: int) -> bool:
    """–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç, —Å—Ç–æ–∏—Ç –ª–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –∫–æ–º–ø–ª–∏–º–µ–Ω—Ç –≤ —ç—Ç–æ–º —á–∞—Ç–µ"""
    # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—á–µ—Ç—á–∏–∫–∞ –¥–ª—è –Ω–æ–≤–æ–≥–æ —á–∞—Ç–∞
    if chat_id not in message_counters:
        message_counters[chat_id] = 0
        # –°–ª—É—á–∞–π–Ω—ã–π –ø–æ—Ä–æ–≥ –º–µ–∂–¥—É 100 –∏ 150 —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
        compliment_thresholds[chat_id] = random.randint(100, 150)
        return False

    # –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫ —Å–æ–æ–±—â–µ–Ω–∏–π
    message_counters[chat_id] += 1

    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –¥–æ—Å—Ç–∏–≥–ª–∏ –ª–∏ –ø–æ—Ä–æ–≥–∞
    if message_counters[chat_id] >= compliment_thresholds[chat_id]:
        # –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫ –∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–æ–≤—ã–π –ø–æ—Ä–æ–≥
        message_counters[chat_id] = 0
        compliment_thresholds[chat_id] = random.randint(100, 150)
        return True

    return False


async def start_command(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /start"""
    await update.message.reply_text(
        "–ü—Ä–∏–≤–µ—Ç! –Ø –±–æ—Ç –î–∂–µ–∫. –°–æ–∑–¥–∞–Ω —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ —á—Ç–æ–±—ã —Ä–∞–∑–≤–ª–µ–∫–∞—Ç—å —ç–∫–∏–ø–∞–∂ –ë—É—Ö–ª–æ—Ö–æ–¥–∞."
        "–£ –º–µ–Ω—è –±—É–¥–µ—Ç –º–Ω–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–π, –Ω–æ –ø–æ–∫–∞ –∏—Ö —á—É—Ç—å-—á—É—Ç—å. "
        "–ò—Å–ø–æ–ª—å–∑—É–π /help –¥–ª—è —Å–ø–∏—Å–∫–∞ –∫–æ–º–∞–Ω–¥."
    )


async def help_command(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /help"""
    help_text = """
ü§ñ **–î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:**
/start - –ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å –±–æ—Ç–æ–º
/help - –ü–æ–∫–∞–∑–∞—Ç—å —ç—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ
/question - –Ø –∑–∞–¥–∞–º —Ç–µ–±–µ –≤–æ–ø—Ä–æ—Å –∏ —Ö–æ—á—É –ø–æ–ª—É—á–∏—Ç—å —á–µ—Å—Ç–Ω—ã–π –æ—Ç–≤–µ—Ç.
/whattodo - –ó–∞–¥–∞–π –≤–æ–ø—Ä–æ—Å –∏ —É–∑–Ω–∞–π –º–æ–µ –º–Ω–µ–Ω–∏–µ. (–Ø –æ—Ç–≤–µ—á—É –¥–∞ –∏–ª–∏ –Ω–µ—Ç)
/leave - –ù–∞—á–∞—Ç—å –ø—Ä–æ—Ü–µ–¥—É—Ä—É –≤—ã—Ö–æ–¥–∞ –∏–∑ —á–∞—Ç–∞

"""
    await update.message.reply_text(help_text)


async def question_command(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /question - –∑–∞–¥–∞–µ—Ç —Å–ª—É—á–∞–π–Ω—ã–π –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π –≤–æ–ø—Ä–æ—Å"""
    question = random.choice(QUESTIONS)
    await update.message.reply_text(f"ü§î –í–æ–ø—Ä–æ—Å –¥–ª—è —Ä–∞–∑–º—ã—à–ª–µ–Ω–∏—è:\n\n{question}")


async def whattodo_command(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /whattodo - –≤—Å–µ–≥–¥–∞ –æ—Ç–≤–µ—á–∞–µ—Ç '–î–∞' –≤ —Ä–∞–∑–Ω–æ–π —Ñ–æ—Ä–º–µ"""
    response = random.choice(YES_RESPONSES)
    await update.message.reply_text(response)


async def leave_command(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /leave - –ø—Ä–æ—Ü–µ–¥—É—Ä–∞ –≤—ã—Ö–æ–¥–∞ –∏–∑ —á–∞—Ç–∞"""
    chat_id = update.message.chat_id
    user_id = update.message.from_user.id
    user_name = update.message.from_user.first_name
    
    # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    if chat_id not in leave_states:
        leave_states[chat_id] = {}
    
    leave_states[chat_id][user_id] = {
        "step": 1,
        "user_name": user_name
    }
    
    # –ü–µ—Ä–≤—ã–π –≤–æ–ø—Ä–æ—Å
    await update.message.reply_text(f"{user_name}, —Ç—ã —Ç–æ—á–Ω–æ —Ö–æ—á–µ—à—å –Ω–∞—Å –ø–æ–∫–∏–Ω—É—Ç—å?")


async def handle_leave_response(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –∫–æ–º–∞–Ω–¥—ã /leave"""
    chat_id = update.message.chat_id
    user_id = update.message.from_user.id
    message_text = update.message.text.lower()
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –≤—ã—Ö–æ–¥–∞
    if (chat_id not in leave_states or 
        user_id not in leave_states[chat_id]):
        return
    
    state = leave_states[chat_id][user_id]
    step = state["step"]
    user_name = state["user_name"]
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ—Ç–≤–µ—Ç—ã –Ω–∞ –∫–∞–∂–¥–æ–º —à–∞–≥–µ
    if step == 1:
        if any(word in message_text for word in ["–¥–∞", "yes", "—Ç–æ—á–Ω–æ", "—Ö–æ—á—É", "—É–≤–µ—Ä–µ–Ω"]):
            state["step"] = 2
            await update.message.reply_text("–≠—Ç–æ —Ç–≤–æ–µ —Ç—Ä–µ–∑–≤–æ–µ –∏ –≤–∑–≤–µ—à–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ?")
        else:
            # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ–¥—É–º–∞–ª –Ω–∞ –ø–µ—Ä–≤–æ–º —à–∞–≥–µ
            del leave_states[chat_id][user_id]
            await update.message.reply_text(f"üéâ –£—Ä–∞! {user_name} –æ—Å—Ç–∞–µ—Ç—Å—è —Å –Ω–∞–º–∏! –ú—ã —Ç–∞–∫ —Ä–∞–¥—ã!")
    
    elif step == 2:
        if any(word in message_text for word in ["–¥–∞", "yes", "—Ç—Ä–µ–∑–≤–æ–µ", "–≤–∑–≤–µ—à–µ–Ω–Ω–æ–µ", "—Ä–µ—à–µ–Ω–∏–µ"]):
            state["step"] = 3
            await update.message.reply_text("–ü—Ä–æ—Å—Ç–∏, —Ç—ã —É–≤–µ—Ä–µ–Ω, —á—Ç–æ –Ω–µ –ø–µ—Ä–µ–¥—É–º–∞–µ—à—å?")
        else:
            # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ–¥—É–º–∞–ª –Ω–∞ –≤—Ç–æ—Ä–æ–º —à–∞–≥–µ
            del leave_states[chat_id][user_id]
            await update.message.reply_text(f"üéâ –û—Ç–ª–∏—á–Ω–æ! {user_name} –ø–µ—Ä–µ–¥—É–º–∞–ª(–∞) —É—Ö–æ–¥–∏—Ç—å! –ú—ã —Å—á–∞—Å—Ç–ª–∏–≤—ã!")
    
    elif step == 3:
        if any(word in message_text for word in ["–¥–∞", "yes", "—É–≤–µ—Ä–µ–Ω", "—Ç–æ—á–Ω–æ", "–Ω–µ –ø–µ—Ä–µ–¥—É–º–∞—é"]):
            # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª –≤—ã—Ö–æ–¥
            del leave_states[chat_id][user_id]
            await update.message.reply_text(f"üòî –û—á–µ–Ω—å –∂–∞–ª—å, —á—Ç–æ {user_name} –ø–æ–∫–∏–¥–∞–µ—Ç –Ω–∞—Å... –ú—ã –±—É–¥–µ–º —Å–∫—É—á–∞—Ç—å!")
            
            # –ü—ã—Ç–∞–µ–º—Å—è –∫–∏–∫–Ω—É—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–µ—Å–ª–∏ —É –±–æ—Ç–∞ –µ—Å—Ç—å –ø—Ä–∞–≤–∞)
            try:
                await context.bot.ban_chat_member(chat_id, user_id)
                # –†–∞–∑–±–∞–Ω–∏–≤–∞–µ–º —Å—Ä–∞–∑—É, —á—Ç–æ–±—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–≥ –≤–µ—Ä–Ω—É—Ç—å—Å—è –ø–æ —Å—Å—ã–ª–∫–µ
                await context.bot.unban_chat_member(chat_id, user_id)
            except Exception as e:
                logging.warning(f"–ù–µ —É–¥–∞–ª–æ—Å—å –∫–∏–∫–Ω—É—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: {e}")
                
            # –°–æ–∑–¥–∞–µ–º —Å—Å—ã–ª–∫—É –¥–ª—è –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è
            try:
                invite_link = await context.bot.create_chat_invite_link(
                    chat_id, 
                    member_limit=1,
                    creates_join_request=False
                )
                invite_url = invite_link.invite_link
                
                # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å—Å—ã–ª–∫—É –≤ —á–∞—Ç
                await update.message.reply_text(
                    f"–ï—Å–ª–∏ {user_name} –ø–µ—Ä–µ–¥—É–º–∞–µ—Ç, –≤–æ—Ç —Å—Å—ã–ª–∫–∞ –¥–ª—è –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏—è:\n{invite_url}"
                )
                
                # –ü—ã—Ç–∞–µ–º—Å—è –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –≤ –ª–∏—á–∫—É
                try:
                    await context.bot.send_message(
                        user_id,
                        f"–ï—Å–ª–∏ —Ç—ã –ø–µ—Ä–µ–¥—É–º–∞–µ—à—å, –≤–æ—Ç —Å—Å—ã–ª–∫–∞ –¥–ª—è –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏—è –≤ —á–∞—Ç:\n{invite_url}\n\n–ú—ã –±—É–¥–µ–º –∂–¥–∞—Ç—å —Ç–µ–±—è! ‚ù§Ô∏è"
                    )
                except Exception as e:
                    logging.warning(f"–ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é: {e}")
                    
            except Exception as e:
                logging.warning(f"–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å —Å—Å—ã–ª–∫—É –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è: {e}")
                
        else:
            # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ–¥—É–º–∞–ª –Ω–∞ —Ç—Ä–µ—Ç—å–µ–º —à–∞–≥–µ
            del leave_states[chat_id][user_id]
            await update.message.reply_text(f"üéâ –§—É—Ö! {user_name} –æ—Å—Ç–∞–µ—Ç—Å—è! –ú—ã —Ç–∞–∫ —Ä–∞–¥—ã, —á—Ç–æ —Ç—ã —Å –Ω–∞–º–∏!")


async def handle_message(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Ö–æ–¥—è—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π"""
    message_text = update.message.text.lower()
    chat_id = update.message.chat_id
    user_name = update.message.from_user.first_name

    # –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–º –Ω–∞ –∫–æ–º–∞–Ω–¥—É /leave
    if await handle_leave_response(update, context):
        return

    # 1. –°–ª—É—á–∞–π–Ω—ã–π –∫–æ–º–ø–ª–∏–º–µ–Ω—Ç (—Ä–∞–∑ –≤ 100-150 —Å–æ–æ–±—â–µ–Ω–∏–π)
    if should_send_compliment(chat_id):
        compliment = random.choice(COMPLIMENTS)
        await update.message.reply_text(f"{user_name}, {compliment}")
        return

    # 2. –†–µ–∞–∫—Ü–∏—è –Ω–∞ —Ç—Ä–∏–≥–≥–µ—Ä–Ω—ã–µ —Å–ª–æ–≤–∞ —Å –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å—é 40%
    triggered_responses = []
    for trigger, responses in RESPONSES.items():
        if trigger in message_text:
            triggered_responses.extend(responses)

    # –ï—Å–ª–∏ –Ω–∞—à–ª–∏ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è, –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–ª—É—á–∞–π–Ω—ã–π –æ—Ç–≤–µ—Ç —Å –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å—é 40%
    if triggered_responses and random.random() < 0.4:
        response = random.choice(triggered_responses)
        await update.message.reply_text(response)


async def handle_user_left(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏—è, –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–∫–∏–¥–∞–µ—Ç —á–∞—Ç"""
    if update.message.left_chat_member:
        user = update.message.left_chat_member
        chat_id = update.message.chat_id
        
        # –°–æ–∑–¥–∞–µ–º —Å—Å—ã–ª–∫—É –¥–ª—è –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è
        try:
            invite_link = await context.bot.create_chat_invite_link(
                chat_id, 
                member_limit=1,
                creates_join_request=False
            )
            invite_url = invite_link.invite_link
            
            # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —á–∞—Ç
            await update.message.reply_text(
                f"üòï –ö—Ç–æ-—Ç–æ –∏–∑ –º–µ–ª–∫–∏—Ö –æ–ø—è—Ç—å –Ω–∞–∂–∏–º–∞–µ—Ç –Ω–∞ –∫–Ω–æ–ø–∫–∏ –≤ —Ç–µ–ª–µ–≥–∞—Ñ–æ–Ω–µ...\n\n"
                f"–ï—Å–ª–∏ {user.first_name} —Ö–æ—á–µ—Ç –≤–µ—Ä–Ω—É—Ç—å—Å—è, –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –µ–º—É —ç—Ç—É —Å—Å—ã–ª–∫—É:\n{invite_url}"
            )
            
            # –ü—ã—Ç–∞–µ–º—Å—è –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É —É—à–µ–¥—à–µ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
            try:
                await context.bot.send_message(
                    user.id,
                    f"üëã –ü—Ä–∏–≤–µ—Ç! –í–∏–∂—É, —Ç—ã –ø–æ–∫–∏–Ω—É–ª(–∞) –Ω–∞—à —á–∞—Ç. –ï—Å–ª–∏ —ç—Ç–æ –±—ã–ª–∞ —Å–ª—É—á–∞–π–Ω–æ—Å—Ç—å, "
                    f"–≤–æ—Ç —Å—Å—ã–ª–∫–∞ –¥–ª—è –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏—è:\n{invite_url}\n\n–ú—ã –±—É–¥–µ–º —Ä–∞–¥—ã –≤–∏–¥–µ—Ç—å —Ç–µ–±—è —Å–Ω–æ–≤–∞! ‚ù§Ô∏è"
                )
            except Exception as e:
                logging.warning(f"–ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ —É—à–µ–¥—à–µ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é: {e}")
                
        except Exception as e:
            logging.warning(f"–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å —Å—Å—ã–ª–∫—É –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è: {e}")
            await update.message.reply_text(
                f"üòï {user.first_name} –ø–æ–∫–∏–Ω—É–ª(–∞) —á–∞—Ç. –ö—Ç–æ-—Ç–æ –æ–ø—è—Ç—å –Ω–∞–∂–∏–º–∞–µ—Ç –Ω–∞ –∫–Ω–æ–ø–∫–∏ –≤ —Ç–µ–ª–µ—Ñ–æ–Ω–µ..."
            )


async def error_handler(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫"""
    logging.error(f"–û—à–∏–±–∫–∞: {context.error}")


def main():
    """–û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è"""
    application = Application.builder().token(BOT_TOKEN).build()

    # –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥
    application.add_handler(CommandHandler("start", start_command))
    application.add_handler(CommandHandler("help", help_command))
    application.add_handler(CommandHandler("question", question_command))
    application.add_handler(CommandHandler("whattodo", whattodo_command))
    application.add_handler(CommandHandler("leave", leave_command))

    # –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–æ–±—â–µ–Ω–∏–π (—Å–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞ –æ—Ç–≤–µ—Ç—ã –¥–ª—è /leave)
    application.add_handler(MessageHandler(filters.TEXT & ~filters.COMMAND, handle_message))
    
    # –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤—ã—Ö–æ–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–∑ —á–∞—Ç–∞
    application.add_handler(MessageHandler(filters.StatusUpdate.LEFT_CHAT_MEMBER, handle_user_left))

    # –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—à–∏–±–æ–∫
    application.add_error_handler(error_handler)

    print("ü§ñ –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ!")
    application.run_polling()


if __name__ == "__main__":
    main()

